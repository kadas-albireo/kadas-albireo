ADD_DEFINITIONS(-DGRASS_BASE=\\\"${GRASS_PREFIX}\\\")

INCLUDE(FindZLIB)

ADD_DEFINITIONS(
  -I${CMAKE_CURRENT_SOURCE_DIR}
  -I${GRASS_PREFIX}/lib/db/dbmi_base
  -I${ZLIB_INCLUDE_DIR}
  -D__MINGW32__
  -Dpopen=G_popen
  -Dpclose=G_pclose)
    
ADD_LIBRARY (xdr STATIC
  xdr.c
  xdr_mem.c
  xdr_float.c
  xdr_stdio.c)
		
ADD_LIBRARY (grass_datetime STATIC
  ${GRASS_PREFIX}/lib/datetime/between.c
  ${GRASS_PREFIX}/lib/datetime/change.c
  ${GRASS_PREFIX}/lib/datetime/copy.c
  ${GRASS_PREFIX}/lib/datetime/diff.c
  ${GRASS_PREFIX}/lib/datetime/error.c
  ${GRASS_PREFIX}/lib/datetime/format.c
  ${GRASS_PREFIX}/lib/datetime/incr1.c
  ${GRASS_PREFIX}/lib/datetime/incr2.c
  ${GRASS_PREFIX}/lib/datetime/incr3.c
  ${GRASS_PREFIX}/lib/datetime/local.c
  ${GRASS_PREFIX}/lib/datetime/misc.c
  ${GRASS_PREFIX}/lib/datetime/same.c
  ${GRASS_PREFIX}/lib/datetime/scan.c
  ${GRASS_PREFIX}/lib/datetime/sign.c
  ${GRASS_PREFIX}/lib/datetime/type.c
  ${GRASS_PREFIX}/lib/datetime/tz1.c
  ${GRASS_PREFIX}/lib/datetime/tz2.c
  ${GRASS_PREFIX}/lib/datetime/values.c
)

ADD_LIBRARY (grass_gis SHARED 
  ${GRASS_PREFIX}/lib/gis/adj_cellhd.c
  ${GRASS_PREFIX}/lib/gis/align_window.c
  ${GRASS_PREFIX}/lib/gis/alloc.c
  ${GRASS_PREFIX}/lib/gis/alloc_cell.c
  ${GRASS_PREFIX}/lib/gis/area.c
  ${GRASS_PREFIX}/lib/gis/area_ellipse.c
  ${GRASS_PREFIX}/lib/gis/area_poly1.c
  ${GRASS_PREFIX}/lib/gis/area_poly2.c
  ${GRASS_PREFIX}/lib/gis/area_sphere.c
  ${GRASS_PREFIX}/lib/gis/ascii_chk.c
  ${GRASS_PREFIX}/lib/gis/ask.c
  ${GRASS_PREFIX}/lib/gis/ask_cell.c
  ${GRASS_PREFIX}/lib/gis/ask_vctrs.c
  ${GRASS_PREFIX}/lib/gis/asprintf.c
  ${GRASS_PREFIX}/lib/gis/auto_mask.c
  ${GRASS_PREFIX}/lib/gis/basename.c
  ${GRASS_PREFIX}/lib/gis/bres_line.c
  ${GRASS_PREFIX}/lib/gis/cats.c
  ${GRASS_PREFIX}/lib/gis/cellstats_eq.c
  ${GRASS_PREFIX}/lib/gis/cell_stats.c
  ${GRASS_PREFIX}/lib/gis/cell_title.c
  ${GRASS_PREFIX}/lib/gis/clear_scrn.c
  ${GRASS_PREFIX}/lib/gis/clicker.c
  ${GRASS_PREFIX}/lib/gis/closecell.c
  ${GRASS_PREFIX}/lib/gis/color_compat.c
  ${GRASS_PREFIX}/lib/gis/color_free.c
  ${GRASS_PREFIX}/lib/gis/color_get.c
  ${GRASS_PREFIX}/lib/gis/color_hist.c
  ${GRASS_PREFIX}/lib/gis/color_init.c
  ${GRASS_PREFIX}/lib/gis/color_insrt.c
  ${GRASS_PREFIX}/lib/gis/color_invrt.c
  ${GRASS_PREFIX}/lib/gis/color_look.c
  ${GRASS_PREFIX}/lib/gis/color_org.c
  ${GRASS_PREFIX}/lib/gis/color_rand.c
  ${GRASS_PREFIX}/lib/gis/color_range.c
  ${GRASS_PREFIX}/lib/gis/color_read.c
  ${GRASS_PREFIX}/lib/gis/color_remove.c
  ${GRASS_PREFIX}/lib/gis/color_rule.c
  ${GRASS_PREFIX}/lib/gis/color_rules.c
  ${GRASS_PREFIX}/lib/gis/color_rule_get.c
  ${GRASS_PREFIX}/lib/gis/color_set.c
  ${GRASS_PREFIX}/lib/gis/color_shift.c
  ${GRASS_PREFIX}/lib/gis/color_str.c
  ${GRASS_PREFIX}/lib/gis/color_write.c
  ${GRASS_PREFIX}/lib/gis/color_xform.c
  ${GRASS_PREFIX}/lib/gis/commas.c
  ${GRASS_PREFIX}/lib/gis/copy.c
  ${GRASS_PREFIX}/lib/gis/copy_file.c
  ${GRASS_PREFIX}/lib/gis/date.c
  ${GRASS_PREFIX}/lib/gis/datum.c
  ${GRASS_PREFIX}/lib/gis/debug.c
  ${GRASS_PREFIX}/lib/gis/dig_title.c
  ${GRASS_PREFIX}/lib/gis/distance.c
  ${GRASS_PREFIX}/lib/gis/done_msg.c
  ${GRASS_PREFIX}/lib/gis/endian.c
  ${GRASS_PREFIX}/lib/gis/env.c
  ${GRASS_PREFIX}/lib/gis/error.c
  ${GRASS_PREFIX}/lib/gis/file_name.c
  ${GRASS_PREFIX}/lib/gis/find_cell.c
  ${GRASS_PREFIX}/lib/gis/find_etc.c
  ${GRASS_PREFIX}/lib/gis/find_file.c
  ${GRASS_PREFIX}/lib/gis/find_vect.c
  ${GRASS_PREFIX}/lib/gis/flate.c
  ${GRASS_PREFIX}/lib/gis/fork.c
  ${GRASS_PREFIX}/lib/gis/format.c
  ${GRASS_PREFIX}/lib/gis/fpreclass.c
  ${GRASS_PREFIX}/lib/gis/geodesic.c
  ${GRASS_PREFIX}/lib/gis/geodist.c
  ${GRASS_PREFIX}/lib/gis/getl.c
  ${GRASS_PREFIX}/lib/gis/gets.c
  ${GRASS_PREFIX}/lib/gis/get_cellhd.c
  ${GRASS_PREFIX}/lib/gis/get_datum_name.c
  ${GRASS_PREFIX}/lib/gis/get_ellipse.c
  ${GRASS_PREFIX}/lib/gis/get_ell_name.c
  ${GRASS_PREFIX}/lib/gis/get_projinfo.c
  ${GRASS_PREFIX}/lib/gis/get_projname.c
  ${GRASS_PREFIX}/lib/gis/get_row.c
  ${GRASS_PREFIX}/lib/gis/get_row_colr.c
  ${GRASS_PREFIX}/lib/gis/get_window.c
  ${GRASS_PREFIX}/lib/gis/gisbase.c
  ${GRASS_PREFIX}/lib/gis/gisdbase.c
  ${GRASS_PREFIX}/lib/gis/gishelp.c
  ${GRASS_PREFIX}/lib/gis/gisinit.c
  ${GRASS_PREFIX}/lib/gis/histogram.c
  ${GRASS_PREFIX}/lib/gis/history.c
  ${GRASS_PREFIX}/lib/gis/histo_eq.c
  ${GRASS_PREFIX}/lib/gis/home.c
  ${GRASS_PREFIX}/lib/gis/icon.c
  ${GRASS_PREFIX}/lib/gis/index.c
  ${GRASS_PREFIX}/lib/gis/init_map.c
  ${GRASS_PREFIX}/lib/gis/interp.c
  ${GRASS_PREFIX}/lib/gis/intersect.c
  ${GRASS_PREFIX}/lib/gis/intr_char.c
  ${GRASS_PREFIX}/lib/gis/is.c
  ${GRASS_PREFIX}/lib/gis/key_value1.c
  ${GRASS_PREFIX}/lib/gis/key_value2.c
  ${GRASS_PREFIX}/lib/gis/key_value3.c
  ${GRASS_PREFIX}/lib/gis/key_value4.c
  ${GRASS_PREFIX}/lib/gis/legal_name.c
  ${GRASS_PREFIX}/lib/gis/line_dist.c
  ${GRASS_PREFIX}/lib/gis/list.c
  ${GRASS_PREFIX}/lib/gis/ll_format.c
  ${GRASS_PREFIX}/lib/gis/ll_scan.c
  ${GRASS_PREFIX}/lib/gis/locale.c
  ${GRASS_PREFIX}/lib/gis/location.c
  ${GRASS_PREFIX}/lib/gis/ls.c
  ${GRASS_PREFIX}/lib/gis/mach_name.c
  ${GRASS_PREFIX}/lib/gis/make_colr.c
  ${GRASS_PREFIX}/lib/gis/make_loc.c
  ${GRASS_PREFIX}/lib/gis/make_mapset.c
  ${GRASS_PREFIX}/lib/gis/mapcase.c
  ${GRASS_PREFIX}/lib/gis/mapset.c
  ${GRASS_PREFIX}/lib/gis/mapset_msc.c
  ${GRASS_PREFIX}/lib/gis/mapset_nme.c
  ${GRASS_PREFIX}/lib/gis/maskfd.c
  ${GRASS_PREFIX}/lib/gis/mask_info.c
  ${GRASS_PREFIX}/lib/gis/myname.c
  ${GRASS_PREFIX}/lib/gis/named_colr.c
  ${GRASS_PREFIX}/lib/gis/nl_to_spaces.c
  ${GRASS_PREFIX}/lib/gis/nme_in_mps.c
  ${GRASS_PREFIX}/lib/gis/null_val.c
  ${GRASS_PREFIX}/lib/gis/open.c
  ${GRASS_PREFIX}/lib/gis/opencell.c
  ${GRASS_PREFIX}/lib/gis/open_misc.c
  ${GRASS_PREFIX}/lib/gis/overwrite.c
  ${GRASS_PREFIX}/lib/gis/parser.c
  ${GRASS_PREFIX}/lib/gis/paths.c
  ${GRASS_PREFIX}/lib/gis/percent.c
  ${GRASS_PREFIX}/lib/gis/plot.c
  ${GRASS_PREFIX}/lib/gis/pole_in_poly.c
  ${GRASS_PREFIX}/lib/gis/popen.c
  ${GRASS_PREFIX}/lib/gis/progrm_nme.c
  ${GRASS_PREFIX}/lib/gis/proj1.c
  ${GRASS_PREFIX}/lib/gis/proj2.c
  ${GRASS_PREFIX}/lib/gis/proj3.c
  ${GRASS_PREFIX}/lib/gis/putenv.c
  ${GRASS_PREFIX}/lib/gis/put_cellhd.c
  ${GRASS_PREFIX}/lib/gis/put_row.c
  ${GRASS_PREFIX}/lib/gis/put_title.c
  ${GRASS_PREFIX}/lib/gis/put_window.c
  ${GRASS_PREFIX}/lib/gis/quant.c
  ${GRASS_PREFIX}/lib/gis/quant_io.c
  ${GRASS_PREFIX}/lib/gis/quant_rw.c
  ${GRASS_PREFIX}/lib/gis/radii.c
  ${GRASS_PREFIX}/lib/gis/range.c
  ${GRASS_PREFIX}/lib/gis/raster.c
  ${GRASS_PREFIX}/lib/gis/raster_metadata.c
  ${GRASS_PREFIX}/lib/gis/rd_cellhd.c
  ${GRASS_PREFIX}/lib/gis/reclass.c
  ${GRASS_PREFIX}/lib/gis/remove.c
  ${GRASS_PREFIX}/lib/gis/rename.c
  ${GRASS_PREFIX}/lib/gis/rhumbline.c
  ${GRASS_PREFIX}/lib/gis/rotate.c
  ${GRASS_PREFIX}/lib/gis/sample.c
  ${GRASS_PREFIX}/lib/gis/set_window.c
  ${GRASS_PREFIX}/lib/gis/short_way.c
  ${GRASS_PREFIX}/lib/gis/sleep.c
  ${GRASS_PREFIX}/lib/gis/snprintf.c
  ${GRASS_PREFIX}/lib/gis/spawn.c
  ${GRASS_PREFIX}/lib/gis/squeeze.c
  ${GRASS_PREFIX}/lib/gis/store.c
  ${GRASS_PREFIX}/lib/gis/strings.c
  ${GRASS_PREFIX}/lib/gis/system.c
  ${GRASS_PREFIX}/lib/gis/tempfile.c
  ${GRASS_PREFIX}/lib/gis/timestamp.c
  ${GRASS_PREFIX}/lib/gis/token.c
  ${GRASS_PREFIX}/lib/gis/trim_dec.c
  ${GRASS_PREFIX}/lib/gis/unctrl.c
  ${GRASS_PREFIX}/lib/gis/unix_socks.c
  ${GRASS_PREFIX}/lib/gis/verbose.c
  ${GRASS_PREFIX}/lib/gis/view.c
  ${GRASS_PREFIX}/lib/gis/whoami.c
  ${GRASS_PREFIX}/lib/gis/win32_pipes.c
  ${GRASS_PREFIX}/lib/gis/window_map.c
  ${GRASS_PREFIX}/lib/gis/wind_2_box.c
  ${GRASS_PREFIX}/lib/gis/wind_format.c
  ${GRASS_PREFIX}/lib/gis/wind_in.c
  ${GRASS_PREFIX}/lib/gis/wind_limits.c
  ${GRASS_PREFIX}/lib/gis/wind_overlap.c
  ${GRASS_PREFIX}/lib/gis/wind_scan.c
  ${GRASS_PREFIX}/lib/gis/writ_zeros.c
  ${GRASS_PREFIX}/lib/gis/wr_cellhd.c
  ${GRASS_PREFIX}/lib/gis/yes.c
  ${GRASS_PREFIX}/lib/gis/zero.c
  ${GRASS_PREFIX}/lib/gis/zero_cell.c
  ${GRASS_PREFIX}/lib/gis/zone.c
)
SET_TARGET_PROPERTIES(grass_gis PROPERTIES LINK_FLAGS "/def:${CMAKE_CURRENT_SOURCE_DIR}/grass_gis.def")
TARGET_LINK_LIBRARIES(grass_gis xdr grass_datetime ${ZLIB_LIBRARY})
 
ADD_LIBRARY (grass_vect SHARED
  ${GRASS_PREFIX}/lib/vector/Vlib/area.c
  ${GRASS_PREFIX}/lib/vector/Vlib/array.c
  ${GRASS_PREFIX}/lib/vector/Vlib/box.c
  ${GRASS_PREFIX}/lib/vector/Vlib/break_lines.c
  ${GRASS_PREFIX}/lib/vector/Vlib/break_polygons.c
  ${GRASS_PREFIX}/lib/vector/Vlib/bridges.c
  ${GRASS_PREFIX}/lib/vector/Vlib/buffer.c
  ${GRASS_PREFIX}/lib/vector/Vlib/build.c
  ${GRASS_PREFIX}/lib/vector/Vlib/build_nat.c
  ${GRASS_PREFIX}/lib/vector/Vlib/build_ogr.c
  ${GRASS_PREFIX}/lib/vector/Vlib/close_ogr.c
  ${GRASS_PREFIX}/lib/vector/Vlib/rewind_ogr.c
  ${GRASS_PREFIX}/lib/vector/Vlib/cats.c
  ${GRASS_PREFIX}/lib/vector/Vlib/cindex.c
  ${GRASS_PREFIX}/lib/vector/Vlib/clean_nodes.c
  ${GRASS_PREFIX}/lib/vector/Vlib/close.c
  ${GRASS_PREFIX}/lib/vector/Vlib/close_nat.c
  ${GRASS_PREFIX}/lib/vector/Vlib/constraint.c
  ${GRASS_PREFIX}/lib/vector/Vlib/dangles.c
  ${GRASS_PREFIX}/lib/vector/Vlib/dbcolumns.c
  ${GRASS_PREFIX}/lib/vector/Vlib/error.c
  ${GRASS_PREFIX}/lib/vector/Vlib/field.c
  ${GRASS_PREFIX}/lib/vector/Vlib/find.c
  ${GRASS_PREFIX}/lib/vector/Vlib/graph.c
  ${GRASS_PREFIX}/lib/vector/Vlib/header.c
  ${GRASS_PREFIX}/lib/vector/Vlib/hist.c
  ${GRASS_PREFIX}/lib/vector/Vlib/init_head.c
  ${GRASS_PREFIX}/lib/vector/Vlib/intersect.c
  ${GRASS_PREFIX}/lib/vector/Vlib/legal_vname.c
  ${GRASS_PREFIX}/lib/vector/Vlib/level.c
  ${GRASS_PREFIX}/lib/vector/Vlib/level_two.c
  ${GRASS_PREFIX}/lib/vector/Vlib/line.c
  ${GRASS_PREFIX}/lib/vector/Vlib/list.c
  ${GRASS_PREFIX}/lib/vector/Vlib/map.c
  ${GRASS_PREFIX}/lib/vector/Vlib/net.c
  ${GRASS_PREFIX}/lib/vector/Vlib/open.c
  ${GRASS_PREFIX}/lib/vector/Vlib/open_nat.c
  ${GRASS_PREFIX}/lib/vector/Vlib/open_ogr.c
  ${GRASS_PREFIX}/lib/vector/Vlib/overlap.c
  ${GRASS_PREFIX}/lib/vector/Vlib/overlay.c
  ${GRASS_PREFIX}/lib/vector/Vlib/poly.c
  ${GRASS_PREFIX}/lib/vector/Vlib/read.c
  ${GRASS_PREFIX}/lib/vector/Vlib/read_nat.c
  ${GRASS_PREFIX}/lib/vector/Vlib/read_ogr.c
  ${GRASS_PREFIX}/lib/vector/Vlib/remove_areas.c
  ${GRASS_PREFIX}/lib/vector/Vlib/remove_duplicates.c
  ${GRASS_PREFIX}/lib/vector/Vlib/rewind.c
  ${GRASS_PREFIX}/lib/vector/Vlib/rewind_nat.c
  ${GRASS_PREFIX}/lib/vector/Vlib/select.c
  ${GRASS_PREFIX}/lib/vector/Vlib/sindex.c
  ${GRASS_PREFIX}/lib/vector/Vlib/snap.c
  ${GRASS_PREFIX}/lib/vector/Vlib/tin.c
  ${GRASS_PREFIX}/lib/vector/Vlib/type.c
  ${GRASS_PREFIX}/lib/vector/Vlib/window.c
  ${GRASS_PREFIX}/lib/vector/Vlib/write.c
  ${GRASS_PREFIX}/lib/vector/Vlib/write_nat.c
)
SET_TARGET_PROPERTIES(grass_vect PROPERTIES LINK_FLAGS "/def:${CMAKE_CURRENT_SOURCE_DIR}/grass_vect.def")
TARGET_LINK_LIBRARIES(grass_vect grass_gis grass_rtree grass_dbmiclient grass_dig2 grass_linkm grass_dgl ${GDAL_LIBRARY} ${PROJ_LIBRARY})
    
ADD_LIBRARY(grass_dig2 SHARED
  ${GRASS_PREFIX}/lib/vector/diglib/allocation.c
  ${GRASS_PREFIX}/lib/vector/diglib/angle.c
  ${GRASS_PREFIX}/lib/vector/diglib/box.c
  ${GRASS_PREFIX}/lib/vector/diglib/cindex.c
  ${GRASS_PREFIX}/lib/vector/diglib/cindex_rw.c
  ${GRASS_PREFIX}/lib/vector/diglib/file.c
  ${GRASS_PREFIX}/lib/vector/diglib/frmt.c
  ${GRASS_PREFIX}/lib/vector/diglib/head.c
  ${GRASS_PREFIX}/lib/vector/diglib/inside.c
  ${GRASS_PREFIX}/lib/vector/diglib/linecros.c
  ${GRASS_PREFIX}/lib/vector/diglib/line_dist.c
  ${GRASS_PREFIX}/lib/vector/diglib/list.c
  ${GRASS_PREFIX}/lib/vector/diglib/plus.c
  ${GRASS_PREFIX}/lib/vector/diglib/plus_area.c
  ${GRASS_PREFIX}/lib/vector/diglib/plus_line.c
  ${GRASS_PREFIX}/lib/vector/diglib/plus_node.c
  ${GRASS_PREFIX}/lib/vector/diglib/plus_struct.c
  ${GRASS_PREFIX}/lib/vector/diglib/poly.c
  ${GRASS_PREFIX}/lib/vector/diglib/portable.c
  ${GRASS_PREFIX}/lib/vector/diglib/port_init.c
  ${GRASS_PREFIX}/lib/vector/diglib/port_test.c
  ${GRASS_PREFIX}/lib/vector/diglib/prune.c
  ${GRASS_PREFIX}/lib/vector/diglib/spindex.c
  ${GRASS_PREFIX}/lib/vector/diglib/spindex_rw.c
  ${GRASS_PREFIX}/lib/vector/diglib/struct_alloc.c
  ${GRASS_PREFIX}/lib/vector/diglib/type.c
  ${GRASS_PREFIX}/lib/vector/diglib/update.c
)
SET_TARGET_PROPERTIES(grass_dig2 PROPERTIES LINK_FLAGS "/def:${CMAKE_CURRENT_SOURCE_DIR}/grass_dig2.def")
TARGET_LINK_LIBRARIES(grass_dig2 grass_gis grass_rtree)

ADD_LIBRARY (grass_rtree SHARED 
  ${GRASS_PREFIX}/lib/vector/rtree/card.c
  ${GRASS_PREFIX}/lib/vector/rtree/index.c
  ${GRASS_PREFIX}/lib/vector/rtree/node.c
  ${GRASS_PREFIX}/lib/vector/rtree/rect.c
  ${GRASS_PREFIX}/lib/vector/rtree/split_q.c
)
SET_TARGET_PROPERTIES(grass_rtree PROPERTIES LINK_FLAGS "/def:${CMAKE_CURRENT_SOURCE_DIR}/grass_rtree.def")
  
ADD_LIBRARY(grass_dgl SHARED
  ${GRASS_PREFIX}/lib/vector/dglib/graph.c
  ${GRASS_PREFIX}/lib/vector/dglib/graph_v1.c
  ${GRASS_PREFIX}/lib/vector/dglib/graph_v2.c
  ${GRASS_PREFIX}/lib/vector/dglib/helpers.c
  ${GRASS_PREFIX}/lib/vector/dglib/tree.c
  ${GRASS_PREFIX}/lib/vector/dglib/heap.c
  ${GRASS_PREFIX}/lib/vector/dglib/avl.c
  ${GRASS_PREFIX}/lib/vector/dglib/tavl.c
)
SET_TARGET_PROPERTIES(grass_dgl PROPERTIES LINK_FLAGS "/def:${CMAKE_CURRENT_SOURCE_DIR}/grass_dgl.def")

ADD_LIBRARY (grass_gproj SHARED 
  ${GRASS_PREFIX}/lib/proj/convert.c
  ${GRASS_PREFIX}/lib/proj/datum.c
  ${GRASS_PREFIX}/lib/proj/do_proj.c
  ${GRASS_PREFIX}/lib/proj/ellipse.c
  ${GRASS_PREFIX}/lib/proj/get_proj.c
)
SET_TARGET_PROPERTIES(grass_gproj PROPERTIES LINK_FLAGS "/def:${CMAKE_CURRENT_SOURCE_DIR}/grass_gproj.def")
TARGET_LINK_LIBRARIES(grass_gproj grass_gis grass_rtree grass_dig2 ${PROJ_LIBRARY} ${GDAL_LIBRARY})
  
ADD_LIBRARY (grass_dbmibase SHARED 
  ${GRASS_PREFIX}/lib/db/dbmi_base/alloc.c
  ${GRASS_PREFIX}/lib/db/dbmi_base/case.c
  ${GRASS_PREFIX}/lib/db/dbmi_base/column.c
  ${GRASS_PREFIX}/lib/db/dbmi_base/columnfmt.c
  ${GRASS_PREFIX}/lib/db/dbmi_base/connect.c
  ${GRASS_PREFIX}/lib/db/dbmi_base/cursor.c
  ${GRASS_PREFIX}/lib/db/dbmi_base/datetime.c
  ${GRASS_PREFIX}/lib/db/dbmi_base/dbmscap.c
  ${GRASS_PREFIX}/lib/db/dbmi_base/default_name.c
  ${GRASS_PREFIX}/lib/db/dbmi_base/dirent.c
  ${GRASS_PREFIX}/lib/db/dbmi_base/error.c
  ${GRASS_PREFIX}/lib/db/dbmi_base/handle.c
  ${GRASS_PREFIX}/lib/db/dbmi_base/index.c
  ${GRASS_PREFIX}/lib/db/dbmi_base/interval.c
  ${GRASS_PREFIX}/lib/db/dbmi_base/isdir.c
  ${GRASS_PREFIX}/lib/db/dbmi_base/legal_dbname.c
  ${GRASS_PREFIX}/lib/db/dbmi_base/login.c
  ${GRASS_PREFIX}/lib/db/dbmi_base/ret_codes.c
  ${GRASS_PREFIX}/lib/db/dbmi_base/sqlCtype.c
  ${GRASS_PREFIX}/lib/db/dbmi_base/sqltype.c
  ${GRASS_PREFIX}/lib/db/dbmi_base/string.c
  ${GRASS_PREFIX}/lib/db/dbmi_base/strip.c
  ${GRASS_PREFIX}/lib/db/dbmi_base/table.c
  ${GRASS_PREFIX}/lib/db/dbmi_base/token.c
  ${GRASS_PREFIX}/lib/db/dbmi_base/value.c
  ${GRASS_PREFIX}/lib/db/dbmi_base/valuefmt.c
  ${GRASS_PREFIX}/lib/db/dbmi_base/whoami.c
  ${GRASS_PREFIX}/lib/db/dbmi_base/xdr.c
  ${GRASS_PREFIX}/lib/db/dbmi_base/xdrchar.c
  ${GRASS_PREFIX}/lib/db/dbmi_base/xdrcolumn.c
  ${GRASS_PREFIX}/lib/db/dbmi_base/xdrdatetime.c
  ${GRASS_PREFIX}/lib/db/dbmi_base/xdrdouble.c
  ${GRASS_PREFIX}/lib/db/dbmi_base/xdrfloat.c
  ${GRASS_PREFIX}/lib/db/dbmi_base/xdrhandle.c
  ${GRASS_PREFIX}/lib/db/dbmi_base/xdrindex.c
  ${GRASS_PREFIX}/lib/db/dbmi_base/xdrint.c
  ${GRASS_PREFIX}/lib/db/dbmi_base/xdrprocedure.c
  ${GRASS_PREFIX}/lib/db/dbmi_base/xdrshort.c
  ${GRASS_PREFIX}/lib/db/dbmi_base/xdrstring.c
  ${GRASS_PREFIX}/lib/db/dbmi_base/xdrtable.c
  ${GRASS_PREFIX}/lib/db/dbmi_base/xdrtoken.c
  ${GRASS_PREFIX}/lib/db/dbmi_base/xdrvalue.c
  ${GRASS_PREFIX}/lib/db/dbmi_base/zero.c
)
SET_SOURCE_FILES_PROPERTIES(${GRASS_PREFIX}/lib/db/dbmi_base/xdr.c PROPERTIES COMPILE_FLAGS -U__MINGW32__)
SET_TARGET_PROPERTIES(grass_dbmibase PROPERTIES LINK_FLAGS "/def:${CMAKE_CURRENT_SOURCE_DIR}/grass_dbmibase.def")
TARGET_LINK_LIBRARIES(grass_dbmibase grass_gis)
    
ADD_LIBRARY (grass_linkm SHARED
  ${GRASS_PREFIX}/lib/linkm/destroy.c
  ${GRASS_PREFIX}/lib/linkm/dispose.c
  ${GRASS_PREFIX}/lib/linkm/init.c
  ${GRASS_PREFIX}/lib/linkm/new.c
  ${GRASS_PREFIX}/lib/linkm/next.c
  ${GRASS_PREFIX}/lib/linkm/oom.c
)
SET_TARGET_PROPERTIES(grass_linkm PROPERTIES LINK_FLAGS "/def:${CMAKE_CURRENT_SOURCE_DIR}/grass_linkm.def")

ADD_LIBRARY (grass_dbmiclient SHARED
  ${GRASS_PREFIX}/lib/db/dbmi_client/column.c
  ${GRASS_PREFIX}/lib/db/dbmi_client/copy_tab.c
  ${GRASS_PREFIX}/lib/db/dbmi_client/c_add_col.c
  ${GRASS_PREFIX}/lib/db/dbmi_client/c_bindupdate.c
  ${GRASS_PREFIX}/lib/db/dbmi_client/c_closedb.c
  ${GRASS_PREFIX}/lib/db/dbmi_client/c_close_cur.c
  ${GRASS_PREFIX}/lib/db/dbmi_client/c_createdb.c
  ${GRASS_PREFIX}/lib/db/dbmi_client/c_create_idx.c
  ${GRASS_PREFIX}/lib/db/dbmi_client/c_create_tab.c
  ${GRASS_PREFIX}/lib/db/dbmi_client/c_delete.c
  ${GRASS_PREFIX}/lib/db/dbmi_client/c_deletedb.c
  ${GRASS_PREFIX}/lib/db/dbmi_client/c_desc_table.c
  ${GRASS_PREFIX}/lib/db/dbmi_client/c_drop_col.c
  ${GRASS_PREFIX}/lib/db/dbmi_client/c_drop_index.c
  ${GRASS_PREFIX}/lib/db/dbmi_client/c_drop_tab.c
  ${GRASS_PREFIX}/lib/db/dbmi_client/c_execute.c
  ${GRASS_PREFIX}/lib/db/dbmi_client/c_fetch.c
  ${GRASS_PREFIX}/lib/db/dbmi_client/c_finddb.c
  ${GRASS_PREFIX}/lib/db/dbmi_client/c_insert.c
  ${GRASS_PREFIX}/lib/db/dbmi_client/c_listdb.c
  ${GRASS_PREFIX}/lib/db/dbmi_client/c_list_drivers.c
  ${GRASS_PREFIX}/lib/db/dbmi_client/c_list_idx.c
  ${GRASS_PREFIX}/lib/db/dbmi_client/c_list_tabs.c
  ${GRASS_PREFIX}/lib/db/dbmi_client/c_opendb.c
  ${GRASS_PREFIX}/lib/db/dbmi_client/c_openinsert.c
  ${GRASS_PREFIX}/lib/db/dbmi_client/c_openselect.c
  ${GRASS_PREFIX}/lib/db/dbmi_client/c_openupdate.c
  ${GRASS_PREFIX}/lib/db/dbmi_client/c_priv.c
  ${GRASS_PREFIX}/lib/db/dbmi_client/c_rows.c
  ${GRASS_PREFIX}/lib/db/dbmi_client/c_update.c
  ${GRASS_PREFIX}/lib/db/dbmi_client/c_version.c
  ${GRASS_PREFIX}/lib/db/dbmi_client/db.c
  ${GRASS_PREFIX}/lib/db/dbmi_client/delete_tab.c
  ${GRASS_PREFIX}/lib/db/dbmi_client/printtab.c
  ${GRASS_PREFIX}/lib/db/dbmi_client/select.c
  ${GRASS_PREFIX}/lib/db/dbmi_client/shutdown.c
  ${GRASS_PREFIX}/lib/db/dbmi_client/start.c
  ${GRASS_PREFIX}/lib/db/dbmi_client/table.c
)
SET_TARGET_PROPERTIES(grass_dbmiclient PROPERTIES LINK_FLAGS "/def:${CMAKE_CURRENT_SOURCE_DIR}/grass_dbmiclient.def")
TARGET_LINK_LIBRARIES(grass_dbmiclient grass_dbmibase)

ADD_LIBRARY (grass_I SHARED
  ${GRASS_PREFIX}/lib/imagery/alloc.c
  ${GRASS_PREFIX}/lib/imagery/ask_group.c
  ${GRASS_PREFIX}/lib/imagery/c_assign.c
  ${GRASS_PREFIX}/lib/imagery/c_begin.c
  ${GRASS_PREFIX}/lib/imagery/c_clear.c
  ${GRASS_PREFIX}/lib/imagery/c_distinct.c
  ${GRASS_PREFIX}/lib/imagery/c_exec.c
  ${GRASS_PREFIX}/lib/imagery/c_execmem.c
  ${GRASS_PREFIX}/lib/imagery/c_means.c
  ${GRASS_PREFIX}/lib/imagery/c_merge.c
  ${GRASS_PREFIX}/lib/imagery/c_nclasses.c
  ${GRASS_PREFIX}/lib/imagery/c_point.c
  ${GRASS_PREFIX}/lib/imagery/c_reassign.c
  ${GRASS_PREFIX}/lib/imagery/c_reclass.c
  ${GRASS_PREFIX}/lib/imagery/c_sep.c
  ${GRASS_PREFIX}/lib/imagery/c_sig.c
  ${GRASS_PREFIX}/lib/imagery/c_sum2.c
  ${GRASS_PREFIX}/lib/imagery/eol.c
  ${GRASS_PREFIX}/lib/imagery/find.c
  ${GRASS_PREFIX}/lib/imagery/fopen.c
  ${GRASS_PREFIX}/lib/imagery/georef.c
  ${GRASS_PREFIX}/lib/imagery/group.c
  ${GRASS_PREFIX}/lib/imagery/list_gp.c
  ${GRASS_PREFIX}/lib/imagery/list_subgp.c
  ${GRASS_PREFIX}/lib/imagery/loc_info.c
  ${GRASS_PREFIX}/lib/imagery/ls_groups.c
  ${GRASS_PREFIX}/lib/imagery/points.c
  ${GRASS_PREFIX}/lib/imagery/ref.c
  ${GRASS_PREFIX}/lib/imagery/sig.c
  ${GRASS_PREFIX}/lib/imagery/sigfile.c
  ${GRASS_PREFIX}/lib/imagery/sigset.c
  ${GRASS_PREFIX}/lib/imagery/sigsetfile.c
  ${GRASS_PREFIX}/lib/imagery/target.c
  ${GRASS_PREFIX}/lib/imagery/title.c
  ${GRASS_PREFIX}/lib/imagery/var.c
)
SET_TARGET_PROPERTIES(grass_I PROPERTIES LINK_FLAGS "/def:${CMAKE_CURRENT_SOURCE_DIR}/grass_I.def")
TARGET_LINK_LIBRARIES(grass_I grass_gis)
 
INSTALL(TARGETS
  grass_gis
  grass_vect
  grass_dig2
  grass_rtree
  grass_dgl
  grass_gproj
  grass_dbmibase
  grass_linkm
  grass_dbmiclient
  grass_I
  RUNTIME DESTINATION ${QGIS_BIN_DIR}
  ARCHIVE DESTINATION lib)
