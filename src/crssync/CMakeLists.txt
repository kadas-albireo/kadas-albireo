ADD_EXECUTABLE(crssync main.cpp)

INCLUDE_DIRECTORIES(
  ../core
  ${GDAL_INCLUDE_DIR}
  ${PROJ_INCLUDE_DIR}
)

TARGET_LINK_LIBRARIES(crssync
  qgis_core
  ${PROJ_LIBRARY}
  ${GDAL_LIBRARY}
)

IF(MSVC AND NOT USING_NMAKE)
	ADD_CUSTOM_TARGET(synccrsdb
		COMMAND ${CMAKE_RUNTIME_OUTPUT_DIRECTORY}/${CMAKE_CFG_INTDIR}/crssync.exe
		DEPENDS crssync
	)
ELSE(MSVC AND NOT USING_NMAKE)
	ADD_CUSTOM_TARGET(synccrsdb
		COMMAND ${CMAKE_RUNTIME_OUTPUT_DIRECTORY}/crssync
		DEPENDS crssync
	)
ENDIF(MSVC AND NOT USING_NMAKE)

INSTALL(CODE "MESSAGE(\"Installing crssync ...\")")
INSTALL(TARGETS crssync RUNTIME DESTINATION ${QGIS_LIBEXEC_DIR})
