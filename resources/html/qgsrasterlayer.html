<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <!-- custom blueprint see http://ianli.com/blueprinter/?cw=20&gw=5&cc=24 -->
    <link rel="stylesheet" href="../css/screen.css" type="text/css" media="screen, projection" />
    <link rel="stylesheet" href="../css/print.css" type="text/css" media="print" /> 
    <link rel="stylesheet" href="../css/qgisdoc.css" type="text/css" /> 
    <script language="javascript" type="text/javascript" src="../js/jquery.js"></script>
    <script language="javascript" type="text/javascript" src="../js/jquery.flot.js"></script>
    <script language="javascript" type="text/javascript" src="../js/jquery.flot.navigate.js"></script>
    <script language="javascript" type="text/javascript" src="../js/json.js"></script>
    <script id="source" language="javascript" type="text/javascript">
      //The raster layer properties dialog will pass an object 'mRasterLayer' 
      //to this javascript context which you can interrogate for all its metadata
      //and invoke any of its slots
      function showJson() 
      {
        if (typeof mRasterLayer === 'undefined') 
        {
          $("#notes").html("mRasterLayer is undefined");
        }
        else
        {
          //for fun lets pickle the raster layer as a json object
          //$("#notes").html(JSON.stringify(mRasterLayer));
          //also you can use any slots as native jscript methods:
          $("#scale-range").hide().html("Minumum Scale: " + mRasterLayer.minimumScale() + " to Maximum Scale: " + mRasterLayer.maximumScale() ).slideToggle();
        }

      }
      /** Load the metadata object passed into this page from c++ context using 
          wvMetadata->page()->mainFrame()->addToJavaScriptWindowObject( "mRasterLayer", mRasterLayer );
          wvMetadata->page()->mainFrame()->evaluateJavaScript(QString("setMetadata()"));
      */
      function setMetadata( )
      {
        $("#metadata").html( mRasterLayer["metadata"] );
      }
    </script>
  </head>
  <body>
    <div class="container">
      <h1>Metadata</h1>
      <hr/>
      <div id="metadata" class="span-24"></div>
      </hr>
      <div id="footer">Generated by Quantum GIS (http://qgis.org)</div>
      <div id="scale-range" class="span-24"></div>
      <div id="notes" class="span-24"></div>
      <button onclick="showJson()" >Show scale range</button>
    </div>
  </body>
</html>
